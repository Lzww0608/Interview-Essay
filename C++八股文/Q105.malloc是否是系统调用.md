# Q105.malloc是否是系统调用

`malloc`是用户态行为，不是系统调用，但会涉及系统调用。

通过glibc来分配行为，如果没有空间，则需要brk分配。

如果需要较大空间，则需要mmap，直接系统调用分配空间。



## 系统调用是否会引起线程切换？

+ 系统调用由软中断 int 0x80
+ 系统调用的过程：
  + 触发中断
  + 切换堆栈： 用户态切换为内核态
  + 执行中断处理
  + 从中断处理程序返回 iret
+ 不一定引起线程切换
  + 会： 阻塞io，io未就绪，会发生线程切换
  + 不会，非阻塞io，不管是否阻塞，不会发生线程切换