# 为什么MySQL使用B+树而不是跳表

### 1. 磁盘IO效率问题

MySQL是基于磁盘存储系统，而B+树的设计就很符合磁盘存储系统，它可以最大化地减少磁盘IO操作。而磁盘IO的读写速度远小于内存的读写速度，所以减少磁盘IO操作对于MySQL性能的提升至关重要，与之相对，Redis是基于内存的，所以可以使用跳表而不是B+树，它不需要磁盘的IO操作。以下是B+树减少磁盘IO的几个关键点：

+ **高扇出度**：B+树的每个节点可以包含大量的键值对。这种高扇出度意味着数据可以在较低的树深度上被组织，因此访问任何数据都需要较少的磁盘读取次数。例如，一个节点可能能够存储数百个键。因此，即使是在非常大的数据集中，B+树也可能只有几层深，这显著减少了访问所需的磁盘读取次数。
+ **顺序数据访问**：在B+树中，所有的叶节点都是通过指针链接的，并且包含了实际的数据值或数据记录的指针。这种结构使得范围查询（比如检索一定范围内的所有记录）非常高效，因为一旦到达了范围的起点，后续的数据可以通过顺序访问叶节点链表获得，而不需要反复从磁盘加载新的非连续页面。
+ **局部性原理**：B+树的设计支持局部性原理，即相关数据通常存储在物理上相近的位置。
+ **平衡树结构**：B+树是一种平衡树，这意味着从根节点到任何叶节点的路径长度都相同。这种平衡确保了在最坏情况下的性能保证，使得每次查找、插入或删除操作的时间复杂度都是可预测的，并且相对较低。



### 2. 范围查询性能

B+树支持范围查询，这对于数据库是非常有用的。通过B+树的结构，可以非常高效地进行范围搜索，因为叶节点是通过指针相连的，这使得在有序的数据元素之间顺序访问变得非常快速。而跳表虽然也支持范围查询，但其性能通常不如B+树稳定，尤其是在数据量大时。



### 3.空间利用率

B+树的节点通常在磁盘上按页存储，每个节点通常占据一个页的空间。这种设计有效地利用了磁盘页的空间，因为它可以在每个节点中存储更多的键。而跳表的空间利用率通常较低，因为它需要存储多个指针，这增加了额外的存储开销。



### 4. 大规模写入时性能

B+树在处理大量数据插入和删除时，通过分裂和合并节点维护平衡，这使得树的高度保持较低，从而保持查询、插入和删除操作的效率。虽然跳表的插入和删除操作在理论上较快，但在实际应用中，跳表可能需要频繁地更新其多层结构，这在处理大规模数据时可能不如B+树高效。