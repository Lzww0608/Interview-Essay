# 47.批量清理临时镜像文件

要批量清理Docker中的临时镜像文件，可以使用`docker image prune`命令。这个命令会删除所有未被使用的镜像。如果你希望删除所有的临时镜像文件（包括悬挂镜像和未使用的镜像），可以使用带有`-a`参数的命令：

```bash
docker image prune -a
```

此外，如果希望清理更多的资源，可以使用`docker system prune`，它会清理包括容器、网络、未使用的镜像、挂起的卷等更多的临时资源。

### 详细讲解与拓展

1. `docker image prune`：
   - `docker image prune`命令用于清理Docker中不再使用的镜像。默认情况下，它只会删除没有被任何容器使用的悬挂镜像（dangling images），这些镜像通常是旧的、不再使用的镜像层。

- 命令格式：
  执行该命令时，Docker会列出将要删除的镜像，并要求确认。如果确定要删除，可以输入 `y`进行确认。

1. 使用`-a`选项清理所有未使用的镜像：

   如果你希望删除所有未被容器使用的镜像（包括悬挂镜像和其它不再使用的镜像），可以加上-a

   选项：

   ```bash
   docker image prune -a
   ```

   这样，Docker将删除所有未被容器使用的镜像，而不仅仅是悬挂镜像。

2. **docker system prune**：
   如果你不仅希望清理镜像，还希望清理所有未使用的容器、网络和挂起的卷，可以使用`docker system prune`命令。这个命令会执行更广泛的清理操作，删除所有不再使用的资源：

   ```bash
   docker system prune
   ```

   - 该命令会删除：
     - 停止的容器
     - 未使用的网络
     - 悬挂镜像
     - 没有被任何容器使用的卷
   - 如果希望删除所有未使用的镜像，可以使用`docker system prune -a`。

3. 清理卷：

   如果希望单独清理不再使用的Docker卷，可以使用：

   ```bash
   docker volume prune
   ```

   该命令会删除所有没有被任何容器挂载的卷。

4. **清理网络**：
   Docker中的未使用网络也可以通过以下命令进行清理：

   ```bash
   docker network prune
   ```

   该命令会删除所有没有被容器使用的网络。

5. **避免误删**：
   清理临时文件时，注意`docker system prune`等命令会删除一些没有被使用的资源。如果不确定是否删除某些内容，可以先查看哪些资源是未使用的，通过以下命令查看：

   - `docker images`：列出所有镜像。
   - `docker ps -a`：列出所有容器（包括停止的容器）。

**总结**：要批量清理临时镜像文件，可以使用`docker image prune -a`来删除所有未使用的镜像，或者使用`docker system prune`来清理所有未使用的资源，包括容器、网络和卷等。