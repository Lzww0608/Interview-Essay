# 72.退出时自动删除

要实现退出 Docker 容器时自动删除容器，可以在启动容器时使用 `--rm` 参数。这个参数会在容器退出后自动删除容器，确保不会留下已经停止的容器占用系统资源。

例如：

```bash
docker run --rm ubuntu
```

### 详细讲解与拓展

1. `--rm` 参数作用：

   - `--rm` 是 Docker 中的一个选项，用来告诉 Docker 在容器停止时自动删除该容器。通常情况下，Docker 容器在停止后会保持在退出状态，直到用户手动删除。而如果添加 `--rm` 选项，容器在停止后会被自动清理。
   - 这个选项对于临时性的、测试性的容器非常有用。它确保了容器在结束运行后不会继续占用存储空间或系统资源。

2. 适用场景：

   - **临时测试容器**：当你只需要临时运行容器进行测试时，使用 `--rm` 可以确保测试结束后容器不再占用系统资源。
   - **一次性任务**：如执行某些自动化任务、脚本或短期运行的命令时，可以使用 `--rm` 自动清理容器。
   - **短周期工作负载**：一些批处理任务、处理完某些数据后立即退出的应用，适合使用 `--rm` 来避免容器堆积。

3. 示例：

   ```bash
   docker run --rm ubuntu echo "Hello, Docker!"
   ```

   这条命令启动一个 Ubuntu 容器，执行 `echo` 命令输出“Hello, Docker!”后，容器自动退出并删除。

4. **注意事项**：

   - `--rm` 只对正常停止的容器有效，如果容器异常退出（如通过 `docker kill`），容器不会被删除。
   - 需要注意的是，`--rm` 是针对单次运行的容器，不会影响容器的重启策略。如果你希望容器自动重启，还需要使用 `--restart` 参数。

5. 结合其他参数使用：

   - 可以将`--rm`与其他参数一起使用，例如`-d`（后台运行）和`-p`（端口映射）：

     ```bash
     docker run -d --rm -p 8080:80 nginx
     ```

**总结**：通过在 `docker run` 命令中加上 `--rm` 参数，可以实现在容器退出后自动删除容器。这对于临时任务或短期容器非常有用，可以有效避免容器堆积。