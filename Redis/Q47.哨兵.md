# Q47. 哨兵

Redis哨兵（Sentinel）是Redis官方推荐的高可用解决方案。在Redis的主从复制模式中，我们有一个主Redis服务，和多个从Redis服务。但是，如果此时主Redis服务挂掉了，那么系统就会自动通过Sentinel选举出一个新的主Redis服务，其他的从Redis服务会自动连接新的主Redis服务。这就保证了系统的高可用。

以下是Redis哨充的主要功能：

1. **监控工作**：哨兵通过发送命令，来监控主服务器和从服务器是否正常运行。
2. **提供通知**：当被监控的某个Redis实例有故障时，Sentinel可以通过API向管理员或者其他应用程序发送通知。
3. **自动故障迁移**：当一个主节点不能正常工作时，Sentinel会开始一次故障迁移操作，它会选举出一个从节点来作为新的主节点，并让其他从节点复制新的主节点。
4. **配置提供者**：客户端在连接Redis集群时，可以先连接到Sentinel查询主节点和从节点的信息，然后再决定连接到哪个节点。

比如，一个用Redis作为缓存的Web应用，如果使用了Sentinel，那么当Redis主节点由于某些原因宕机后，可以自动进行故障切换，选择一个从节点提升为主节点，以此来保证服务的持续可用，防止由于Redis节点的宕机导致应用无法访问缓存而出现的性能瓶颈。