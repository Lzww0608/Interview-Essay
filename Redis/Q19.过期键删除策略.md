# Q19.过期键删除策略

Redis使用过期键的删除策略来自动清除已经过期的键，以释放内存空间。Redis采用了多种策略来删除过期键，具体的删除策略由配置参数`eviction`决定，常见的策略包括：

1. **定期删除策略（定时删除**）：Redis会在每个指定的时间间隔（由配置参数`hz`决定）内，检查一批键是否过期，然后删除过期的键。这种策略不会频繁地检查每个键是否过期，因此对CPU的消耗较少。
2. **惰性删除策略（懒汉式删除）**：当访问某个键时，Redis会先检查该键是否过期，如果过期则立即删除。这种策略相对更加高效，因为它只会在需要时才进行检查和删除操作。
3. **定期删除与惰性删除的结合**：Redis同时使用了定期删除和惰性删除两种策略，在有限的时间间隔内通过定期删除来批量清除过期键，同时在读写操作中使用惰性删除来保证及时的清理。

需要注意的是，无论采用哪种删除策略，Redis并不是立即清除过期键，而是通过在查询和写入操作时进行过期键的检查和删除。因此，在过期时间到达之后，过期键可能仍然存在一段时间，直到Redis执行删除操作。如果需要确保即时删除过期键，可以使用`DEL`命令主动删除过期键。

同时，可以通过配置参数`maxmemory`来限制Redis使用的内存大小，当达到内存限制时，Redis会根据所采用的删除策略来淘汰一些数据以释放内存空间。