# Q18.如何调整吞吐量

1. **生产者优化**：

- **批处理**：`batch.size`和 `linger.ms`是 Kafka 生产者用于控制批处理的两个关键参数。`batch.size`控制了一次批处理能够容纳的最大消息数量，而`linger.ms`则控制了生产者在发送批处理之前等待更多消息到达的最长时间。通过增大这两个参数，可以提高生产者的吞吐量，但是可能会增加消息的延迟。
- **压缩**：使用 `compression.type` 参数可以设置消息的压缩类型。压缩可以减少网络传输和磁盘存储的开销，从而提高吞吐量。可选的压缩类型包括 `gzip`，`snappy` 和 `lz4`。
- **并发**：通过增加 `max.in.flight.requests.per.connection` 参数的值，可以增加生产者在等待服务器响应时可以发送的并发请求的数量。

1. **消费者优化**：

- **预取**：`fetch.min.bytes` 和 `fetch.max.wait.ms` 是 Kafka 消费者用于控制预取的两个关键参数。`fetch.min.bytes` 控制了消费者在从服务器获取数据之前需要等待的最小数据量，而 `fetch.max.wait.ms` 则控制了消费者在从服务器获取数据之前需要等待的最长时间。通过增大这两个参数，可以提高消费者的吞吐量，但是可能会增加消息的延迟。
- **并发**：增加消费者组中的消费者数量，可以提高消息的并行处理能力，从而提高吞吐量。
- **提交偏移量的策略**：`auto.commit.interval.ms` 参数控制了消费者自动提交