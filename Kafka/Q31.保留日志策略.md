# Q31.保留日志策略

Kafka的日志保留策略主要基于以下三个参数：

1. `log.retention.hours`：指定日志文件的保留时间，超过这个时间的日志将被删除。
2. `log.retention.bytes`：指定每个日志文件的最大大小，达到这个大小后，最老的日志文件将被删除。
3. `log.segment.bytes`：指定每个日志文件的分段大小，达到这个大小后，当前日志文件将被关闭并开始新的日志文件。

在执行日志保留操作时，Kafka会首先根据log.retention.hours参数判断哪些日志文件已经过期并删除。然后，Kafka会根据log.retention.bytes参数判断哪些日志文件过大并删除。最后，Kafka会根据log.segment.bytes参数关闭当前日志文件并开始新的日志文件。

此外，Kafka还支持配置日志压缩和日志删除策略。其中，日志压缩可以减少存储空间和提高磁盘I/O性能，而日志删除策略则可以控制哪些日志文件需要被删除。