# Q14.Nginx动态、静态资源分离

Nginx的动态资源和静态资源分离是一种常见的Web服务器优化策略，旨在提高网站的加载速度和服务器的处理能力。这种策略基于Nginx处理静态内容（如图片、CSS文件、JavaScript文件等）与处理动态内容（如由PHP、Python等动态语言生成的HTML页面）的能力，将二者分开处理。

## 静态资源分离

**静态资源**是指那些一旦被创建就不经常改变的文件，包括图片、CSS样式表、JavaScript文件等。这些资源可以被Nginx直接从磁盘读取并返回给客户端，无需经过后端应用服务器的处理。Nginx在处理静态文件方面非常高效，能够快速将这些文件提供给读取它们的客户端。



## 动态资源处理

**动态资源**是指那些需要通过执行代码或者脚本实时生成的内容，这些请求通常需要被转发给后端的应用服务器（如PHP-FMP，Python的Gunicom等），由它们处理后生成动态内容返回给Nginx，然后由Nginx返回给客户端。





## 分离的好处

+ **性能优化**：通过让Nginx直接处理静态资源，可以减少对后端服务器的请求，从而降低后端服务器的负载，并减少处理动态请求所需的时间。
+ **缓存优化**：静态资源易于缓存，通过配置Nginx对静态文件进行高效缓存，可以进一步减少服务器的负载和提高响应速度，同时减少带宽损耗。
+ **提高并发能力**：分离静态和动态内容可以让Nginx更好利用其非阻塞IO的优势，提高并发能力。
+ **简化后端服务器的配置**：动态应用只需要关注动态内容的生成，简化了应用服务器的配置和维护工作。



#### 实施分离

实施动态和静态资源分离通常涉及配置Nginx的`location`指令，为不同类型的资源请求设置不同的处理规则。例如，可以为所有静态资源请求（如`.jpg`, `.css`, `.js`文件）配置一个`location`块，指定这些请求直接从文件系统中读取；而将包含动态内容的请求（如`.php`文件）转发给后端的PHP处理器或应用服务器。

通过这种方式，Nginx可以充分发挥其作为静态内容服务器和反向代理服务器的优势，优化资源的加载时间，提升用户体验和服务器效率。